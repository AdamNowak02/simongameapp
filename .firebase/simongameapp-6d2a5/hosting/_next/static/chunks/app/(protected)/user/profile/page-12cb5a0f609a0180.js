(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[864],{4347:(e,t,s)=>{Promise.resolve().then(s.bind(s,7050))},7050:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(5155),o=s(2115),i=s(7982),n=s(399),l=s(7058),d=s(6046);let r="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png";function c(){let[e,t]=(0,o.useState)(null),[s,c]=(0,o.useState)(!0),[u,p]=(0,o.useState)({displayName:"",photoURL:r,street:"",city:"",zipCode:"",nickname:""}),[m,h]=(0,o.useState)(null),f=(0,d.useRouter)();(0,o.useEffect)(()=>{let e=(0,n.hg)(i.j,async e=>{if(e){t(e);let n=(0,l.H9)(i.db,"users",e.uid),d=await (0,l.x7)(n);if(d.exists()){var s,a,o;let t=d.data();p({displayName:e.displayName||"",photoURL:e.photoURL||r,nickname:t.nickname||"",street:(null===(s=t.address)||void 0===s?void 0:s.street)||"",city:(null===(a=t.address)||void 0===a?void 0:a.city)||"",zipCode:(null===(o=t.address)||void 0===o?void 0:o.zipCode)||""})}else p({displayName:e.displayName||"",photoURL:e.photoURL||r,nickname:"",street:"",city:"",zipCode:""})}else f.push("/user/signin");c(!1)});return()=>e()},[f]);let x=async()=>{try{await (0,n.CI)(i.j),f.push("/user/signin")}catch(e){console.error("Błąd podczas wylogowywania:",e.message)}},y=e=>{let{name:t,value:s}=e.target;p(e=>({...e,[t]:s}))},b=async t=>{if(t.preventDefault(),e)try{await (0,n.r7)(e,{displayName:u.displayName,photoURL:u.photoURL||r}),await (0,l.BN)((0,l.H9)(i.db,"users",null==e?void 0:e.uid),{nickname:u.nickname,photoURL:u.photoURL||r,address:{city:u.city,street:u.street,zipCode:u.zipCode}}),console.log("Profile and address updated successfully")}catch(e){h("Nie udało się zaktualizować profilu. Sprawdź swoje uprawnienia."),console.error("Error updating profile:",e.message)}};return s?(0,a.jsx)("p",{children:"Ładowanie..."}):(0,a.jsx)("div",{className:"flex flex-col justify-center items-center h-full",children:(0,a.jsxs)("div",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8 w-full max-w-md",children:[u.photoURL&&(0,a.jsx)("div",{className:"flex justify-center mb-6",children:(0,a.jsx)("img",{src:u.photoURL,alt:"User Profile",className:"w-24 h-24 rounded-full border-2 border-gray-300"})}),(0,a.jsx)("h2",{className:"text-xl font-bold mb-6 text-center",children:"Witaj na swoim profilu!"}),(0,a.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"nickname",className:"block font-bold mb-2",children:"Wyświetlana nazwa"}),(0,a.jsx)("input",{type:"text",id:"nickname",name:"nickname",value:u.nickname,onChange:y,className:"border rounded w-full py-2 px-3 text-gray-700 focus:outline-none focus:shadow-outline"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"photoURL",className:"block font-bold mb-2",children:"Link do zdjęcia (ustaw własne)"}),(0,a.jsx)("input",{type:"text",id:"photoURL",name:"photoURL",value:u.photoURL,onChange:y,className:"border rounded w-full py-2 px-3 text-gray-700 focus:outline-none focus:shadow-outline"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"street",className:"block font-bold mb-2",children:"Ulica"}),(0,a.jsx)("input",{type:"text",id:"street",name:"street",value:u.street,onChange:y,className:"border rounded w-full py-2 px-3 text-gray-700 focus:outline-none focus:shadow-outline"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"city",className:"block font-bold mb-2",children:"Miasto"}),(0,a.jsx)("input",{type:"text",id:"city",name:"city",value:u.city,onChange:y,className:"border rounded w-full py-2 px-3 text-gray-700 focus:outline-none focus:shadow-outline"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"zipCode",className:"block font-bold mb-2",children:"Kod pocztowy"}),(0,a.jsx)("input",{type:"text",id:"zipCode",name:"zipCode",value:u.zipCode,onChange:y,className:"border rounded w-full py-2 px-3 text-gray-700 focus:outline-none focus:shadow-outline"})]}),e&&(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("p",{className:"font-semibold",children:["Status weryfikacji e-maila:"," ",e.emailVerified?(0,a.jsx)("span",{className:"text-green-500",children:"Zweryfikowany"}):(0,a.jsx)("span",{className:"text-red-500",children:"Niezweryfikowany"})]})}),m&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:m}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Zaktualizuj profil"}),(0,a.jsx)("button",{onClick:x,className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Wyloguj się"})]})]})]})})}},7982:(e,t,s)=>{"use strict";s.d(t,{db:()=>d,j:()=>l});var a=s(9904),o=s(399),i=s(7058);let n=(0,a.Wp)({apiKey:"AIzaSyB78xVoymvz1UXImgWC8Qz-d9Kr-jeS4D8",authDomain:"simongameapp-6d2a5.firebaseapp.com",projectId:"simongameapp-6d2a5",storageBucket:"simongameapp-6d2a5.appspot.com",messagingSenderId:"391782492591",appId:"1:391782492591:web:9651180232fc3075fda75a",measurementId:"G-650F3EGMK7"}),l=(0,o.xI)(n),d=(0,i.aU)(n)},6046:(e,t,s)=>{"use strict";var a=s(6658);s.o(a,"redirect")&&s.d(t,{redirect:function(){return a.redirect}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})}},e=>{var t=t=>e(e.s=t);e.O(0,[882,992,734,778,441,517,358],()=>t(4347)),_N_E=e.O()}]);